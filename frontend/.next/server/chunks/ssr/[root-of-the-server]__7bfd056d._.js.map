{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesmichalke/Desktop/University/TUM/thesis/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Script from 'next/script';\nimport { Graphviz } from '@hpcc-js/wasm';\n\nexport default function Home() {\n  const [input, setInput] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [dotString, setDotString] = useState<string>();\n  const [variables, setVariables] = useState<string[]>([]);\n  const [showHelp, setShowHelp] = useState(false);\n  const [graphSvg, setGraphSvg] = useState<string>();\n\n  useEffect(() => {\n    let mounted = true;\n\n    const renderGraph = async () => {\n      if (!dotString) return;\n      \n      try {\n        // Initialize Graphviz\n        await Graphviz.init();\n        // Use the static dot method\n        const svg = await Graphviz.dot(dotString);\n        if (mounted) {\n          setGraphSvg(svg);\n        }\n      } catch (err) {\n        console.error('Error rendering graph:', err);\n      }\n    };\n\n    renderGraph();\n\n    return () => {\n      mounted = false;\n    };\n  }, [dotString]);\n\n  const handleBuild = async () => {\n    setLoading(true);\n    setError(null);\n    setVariables([]);\n    setDotString(undefined);\n    setGraphSvg(undefined);\n    \n    try {\n      const response = await fetch('/api/automaton/dot', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'text/plain',\n        },\n        body: input,\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        const errorMsg = errorText\n          .replace(/\\t/g, '    ')\n          .replace(/ /g, '\\u00A0');\n        console.log('Error message received:', JSON.stringify(errorMsg));\n        setError(errorMsg);\n        return;\n      }\n\n      const data = await response.json();\n      setDotString(data.dot);\n      setVariables(data.variables || []);\n    } catch (err) {\n      const errorMsg = (err instanceof Error ? err.message : 'An error occurred')\n        .replace(/\\t/g, '    ')\n        .replace(/ /g, '\\u00A0');\n      console.log('Error message received:', JSON.stringify(errorMsg));\n      setError(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen p-8\">\n      <Script\n        src=\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"\n        strategy=\"beforeInteractive\"\n      />\n      \n      <div className=\"max-w-4xl mx-auto space-y-8\">\n        <h1 className=\"text-3xl font-bold text-center\">Presburger Arithmetical Expression to Automaton</h1>\n        \n        <div className=\"space-y-4\">\n          <textarea\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                handleBuild();\n              }\n            }}\n            placeholder=\"Enter a Presburger Arithmetical Expression...\"\n            className=\"w-full h-32 p-4 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-2xl\"\n          />\n          \n          {/* Help Section */}\n          <div className=\"mt-2\">\n            <button\n              type=\"button\"\n              className=\"text-blue-600 underline text-sm focus:outline-none\"\n              onClick={() => setShowHelp((prev) => !prev)}\n              aria-expanded={showHelp}\n              aria-controls=\"formula-help-section\"\n            >\n              {showHelp ? 'Hide syntax help' : 'Need help with the syntax?'}\n            </button>\n            {showHelp && (\n              <div\n                id=\"formula-help-section\"\n                className=\"mt-2 p-4 bg-gray-50 border border-gray-200 rounded text-sm text-gray-800\"\n              >\n                <div className=\"mb-2 font-semibold\">Formula Syntax Help</div>\n                <div className=\"mb-2\">\n                  <span className=\"font-semibold\">Boolean connectives:</span><br />\n                  <span className=\"font-mono\">AND</span>, <span className=\"font-mono\">OR</span>, <span className=\"font-mono\">NOT</span>, <span className=\"font-mono\">-&gt;</span>, <span className=\"font-mono\">&lt;-&gt;</span><br />\n                  <span className=\"text-gray-600\">Example: <span className=\"font-mono\">(x = y) AND (NOT (x &lt; 3))</span></span>\n                </div>\n                <div className=\"mb-2\">\n                  <span className=\"font-semibold\">Quantifiers:</span><br />\n                  <span className=\"font-mono\">EX x. ...</span> (there exists), <span className=\"font-mono\">ALL y. ...</span> (for all)<br />\n                  <span className=\"text-gray-600\">Example: <span className=\"font-mono\">EX z. x = 4z</span>, <span className=\"font-mono\">ALL y. y &lt;= x</span></span>\n                </div>\n                <div className=\"mb-2\">\n                  <span className=\"font-semibold\">Comparisons:</span><br />\n                  <span className=\"font-mono\">=</span>, <span className=\"font-mono\">&lt;=</span>, <span className=\"font-mono\">&lt;</span>, <span className=\"font-mono\">&gt;=</span>, <span className=\"font-mono\">&gt;</span><br />\n                  <span className=\"text-gray-600\">Example: <span className=\"font-mono\">x = y + 2</span>, <span className=\"font-mono\">3z &lt; y</span></span>\n                </div>\n                <div className=\"mb-2\">\n                  <span className=\"font-semibold\">Arithmetic:</span><br />\n                  <span className=\"font-mono\">x + y</span>, <span className=\"font-mono\">2x + 3</span><br />\n                  <span className=\"text-gray-600\">Example: <span className=\"font-mono\">x = y + 2</span>, <span className=\"font-mono\">2x + 3</span></span>\n                </div>\n                <div className=\"mb-2\">\n                  <span className=\"font-semibold\">Full formula examples:</span><br />\n                  <span className=\"block font-mono bg-gray-100 rounded p-2 my-1\">x = y + 2</span>\n                  <span className=\"block font-mono bg-gray-100 rounded p-2 my-1\">EX z. x = 4z</span>\n                  <span className=\"block font-mono bg-gray-100 rounded p-2 my-1\">ALL y. y &lt;= x</span>\n                  <span className=\"block font-mono bg-gray-100 rounded p-2 my-1\">(x = y) AND (NOT (x &lt; 3))</span>\n                  <span className=\"block font-mono bg-gray-100 rounded p-2 my-1\">EX x. (x &lt; 3) -&gt; (y = x + 2)</span>\n                </div>\n                <div className=\"mt-2 text-xs text-gray-500\">\n                  <span className=\"font-semibold\">Grammar:</span><br />\n                  <pre className=\"whitespace-pre-wrap font-mono text-xs bg-gray-100 rounded p-2 mt-1\">{`\n?start: formula\n?formula: implication\n?implication: equivalence | equivalence \"->\" implication  -> implies\n?equivalence: or_expr | or_expr \"<->\" equivalence         -> iff\n?or_expr: and_expr | or_expr \"OR\" and_expr                -> or_expr\n?and_expr: not_expr | and_expr \"AND\" not_expr             -> and_expr\n?not_expr: \"NOT\" atom -> not_expr | atom\n?atom: comparison | quantifier | \"(\" formula \")\"\n?quantifier: EX VAR \".\" formula -> ex_quantifier | ALL VAR \".\" formula -> all_quantifier\n?comparison: term \"<=\" term -> leq | term \"=\" term -> eq | term \"<\" term -> less | term \">\" term -> greater | term \">=\" term -> greater_equal\n?term: sum\n?sum: product | sum \"+\" product -> add\n?product: CONST VAR -> mult | factor\n?factor: VAR -> var | CONST -> const\nVAR: /[a-z][a-z0-9_]*/i\nCONST: /[0-9]+/\n`}</pre>\n                </div>\n              </div>\n            )}\n          </div>\n          \n          <button\n            onClick={handleBuild}\n            disabled={loading}\n            className=\"w-full py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {loading ? 'Building...' : 'Build Automaton'}\n          </button>\n        </div>\n\n        {error && (\n          <pre\n            className=\"p-4 bg-red-100 text-red-700 rounded-lg whitespace-pre-wrap font-mono\"\n            style={{ fontFamily: 'JetBrains Mono, Fira Mono, Menlo, Consolas, monospace', fontSize: '16px' }}\n          >\n            {error}\n          </pre>\n        )}\n\n        {/* Graph and variables display */}\n        {dotString && (\n          <>\n            {variables.length > 0 && (\n              <div className=\"flex items-center gap-2 my-4\">\n                <span className=\"font-semibold text-gray-700\">Variable order from top to bottom:</span>\n                {variables.map((v, i) => (\n                  <span key={i} className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded font-mono border border-blue-200\">\n                    {v}\n                  </span>\n                ))}\n              </div>\n            )}\n            <div className=\"border rounded-lg overflow-hidden\">\n              <div\n                id=\"graph\"\n                className=\"w-full h-[600px]\"\n                dangerouslySetInnerHTML={{\n                  __html: graphSvg || ''\n                }}\n              />\n            </div>\n          </>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU;QAEd,MAAM,cAAc;YAClB,IAAI,CAAC,WAAW;YAEhB,IAAI;gBACF,sBAAsB;gBACtB,MAAM,qJAAA,CAAA,WAAQ,CAAC,IAAI;gBACnB,4BAA4B;gBAC5B,MAAM,MAAM,MAAM,qJAAA,CAAA,WAAQ,CAAC,GAAG,CAAC;gBAC/B,IAAI,SAAS;oBACX,YAAY;gBACd;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;QACF;QAEA;QAEA,OAAO;YACL,UAAU;QACZ;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,cAAc;QAClB,WAAW;QACX,SAAS;QACT,aAAa,EAAE;QACf,aAAa;QACb,YAAY;QAEZ,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,sBAAsB;gBACjD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM;YACR;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,WAAW,UACd,OAAO,CAAC,OAAO,QACf,OAAO,CAAC,MAAM;gBACjB,QAAQ,GAAG,CAAC,2BAA2B,KAAK,SAAS,CAAC;gBACtD,SAAS;gBACT;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,aAAa,KAAK,GAAG;YACrB,aAAa,KAAK,SAAS,IAAI,EAAE;QACnC,EAAE,OAAO,KAAK;YACZ,MAAM,WAAW,CAAC,eAAe,QAAQ,IAAI,OAAO,GAAG,mBAAmB,EACvE,OAAO,CAAC,OAAO,QACf,OAAO,CAAC,MAAM;YACjB,QAAQ,GAAG,CAAC,2BAA2B,KAAK,SAAS,CAAC;YACtD,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,8HAAA,CAAA,UAAM;gBACL,KAAI;gBACJ,UAAS;;;;;;0BAGX,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAiC;;;;;;kCAE/C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,WAAW,CAAC;oCACV,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;wCACpC,EAAE,cAAc;wCAChB;oCACF;gCACF;gCACA,aAAY;gCACZ,WAAU;;;;;;0CAIZ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,MAAK;wCACL,WAAU;wCACV,SAAS,IAAM,YAAY,CAAC,OAAS,CAAC;wCACtC,iBAAe;wCACf,iBAAc;kDAEb,WAAW,qBAAqB;;;;;;oCAElC,0BACC,8OAAC;wCACC,IAAG;wCACH,WAAU;;0DAEV,8OAAC;gDAAI,WAAU;0DAAqB;;;;;;0DACpC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAA2B,8OAAC;;;;;kEAC5D,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAU;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAS;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAU;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAY;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;kEAAgB,8OAAC;;;;;kEAC9M,8OAAC;wDAAK,WAAU;;4DAAgB;0EAAS,8OAAC;gEAAK,WAAU;0EAAY;;;;;;;;;;;;;;;;;;0DAEvE,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAAmB,8OAAC;;;;;kEACpD,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAgB;kEAAiB,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAiB;kEAAU,8OAAC;;;;;kEACrH,8OAAC;wDAAK,WAAU;;4DAAgB;0EAAS,8OAAC;gEAAK,WAAU;0EAAY;;;;;;4DAAmB;0EAAE,8OAAC;gEAAK,WAAU;0EAAY;;;;;;;;;;;;;;;;;;0DAExH,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAAmB,8OAAC;;;;;kEACpD,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAQ;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAY;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAW;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAY;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;kEAAW,8OAAC;;;;;kEAC3M,8OAAC;wDAAK,WAAU;;4DAAgB;0EAAS,8OAAC;gEAAK,WAAU;0EAAY;;;;;;4DAAgB;0EAAE,8OAAC;gEAAK,WAAU;0EAAY;;;;;;;;;;;;;;;;;;0DAErH,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAAkB,8OAAC;;;;;kEACnD,8OAAC;wDAAK,WAAU;kEAAY;;;;;;oDAAY;kEAAE,8OAAC;wDAAK,WAAU;kEAAY;;;;;;kEAAa,8OAAC;;;;;kEACpF,8OAAC;wDAAK,WAAU;;4DAAgB;0EAAS,8OAAC;gEAAK,WAAU;0EAAY;;;;;;4DAAgB;0EAAE,8OAAC;gEAAK,WAAU;0EAAY;;;;;;;;;;;;;;;;;;0DAErH,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAA6B,8OAAC;;;;;kEAC9D,8OAAC;wDAAK,WAAU;kEAA+C;;;;;;kEAC/D,8OAAC;wDAAK,WAAU;kEAA+C;;;;;;kEAC/D,8OAAC;wDAAK,WAAU;kEAA+C;;;;;;kEAC/D,8OAAC;wDAAK,WAAU;kEAA+C;;;;;;kEAC/D,8OAAC;wDAAK,WAAU;kEAA+C;;;;;;;;;;;;0DAEjE,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAAe,8OAAC;;;;;kEAChD,8OAAC;wDAAI,WAAU;kEAAsE,CAAC;;;;;;;;;;;;;;;;;AAiBxG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;0CAMS,8OAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;0CAET,UAAU,gBAAgB;;;;;;;;;;;;oBAI9B,uBACC,8OAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,YAAY;4BAAyD,UAAU;wBAAO;kCAE9F;;;;;;oBAKJ,2BACC;;4BACG,UAAU,MAAM,GAAG,mBAClB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAA8B;;;;;;oCAC7C,UAAU,GAAG,CAAC,CAAC,GAAG,kBACjB,8OAAC;4CAAa,WAAU;sDACrB;2CADQ;;;;;;;;;;;0CAMjB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,IAAG;oCACH,WAAU;oCACV,yBAAyB;wCACvB,QAAQ,YAAY;oCACtB;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB","debugId":null}}]
}